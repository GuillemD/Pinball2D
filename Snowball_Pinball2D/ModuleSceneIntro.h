#pragma once
#include "Module.h"
#include "p2List.h"
#include "p2Point.h"
#include "Globals.h"
#include "Box2D/Box2D/Box2D.h"

class PhysBody;

class ModuleSceneIntro : public Module
{
public:
	ModuleSceneIntro(Application* app, bool start_enabled = true);
	~ModuleSceneIntro();

	bool Start();
	update_status Update();
	bool CleanUp();
	void OnCollision(PhysBody* bodyA, PhysBody* bodyB);

public:
	
	p2List<PhysBody*> circles;
	PhysBody* ball;
	p2List<PhysBody*> boxes;
	p2List<PhysBody*> Chains;

	// Pivot 0, 0
	int map[472] = {
		-1, 1430,
		-1, 0,
		800, 1,
		796, 1431,
		448, 1430,
		455, 1411,
		473, 1381,
		475, 1341,
		489, 1338,
		502, 1348,
		513, 1356,
		526, 1368,
		541, 1373,
		562, 1383,
		588, 1381,
		600, 1373,
		612, 1360,
		626, 1335,
		644, 1322,
		660, 1319,
		674, 1319,
		691, 1317,
		704, 1316,
		720, 1307,
		727, 1297,
		727, 1279,
		716, 1264,
		700, 1259,
		680, 1263,
		660, 1264,
		632, 1263,
		608, 1263,
		600, 1251,
		597, 1232,
		602, 1204,
		615, 1187,
		636, 1176,
		659, 1168,
		677, 1164,
		724, 1162,
		764, 1158,
		780, 1159,
		786, 1153,
		786, 1138,
		780, 1119,
		776, 1101,
		776, 1076,
		772, 1055,
		773, 1036,
		783, 1021,
		785, 999,
		768, 986,
		746, 983,
		725, 984,
		712, 962,
		714, 936,
		713, 917,
		721, 910,
		739, 915,
		757, 912,
		767, 903,
		775, 886,
		774, 814,
		777, 791,
		776, 730,
		775, 695,
		774, 615,
		773, 506,
		768, 478,
		748, 452,
		728, 433,
		726, 413,
		746, 397,
		744, 333,
		742, 283,
		726, 264,
		700, 245,
		696, 230,
		707, 221,
		722, 225,
		740, 246,
		749, 263,
		758, 289,
		758, 328,
		758, 369,
		757, 429,
		769, 432,
		781, 430,
		782, 381,
		782, 350,
		784, 315,
		785, 295,
		780, 266,
		767, 233,
		748, 206,
		729, 180,
		695, 159,
		659, 146,
		606, 136,
		557, 130,
		500, 127,
		474, 123,
		448, 108,
		433, 89,
		426, 20,
		401, 20,
		392, 89,
		377, 108,
		325, 122,
		270, 127,
		190, 123,
		131, 129,
		95, 140,
		72, 151,
		57, 166,
		56, 184,
		63, 210,
		76, 227,
		93, 241,
		110, 245,
		137, 245,
		177, 243,
		202, 234,
		216, 211,
		218, 192,
		199, 178,
		184, 174,
		168, 169,
		145, 177,
		135, 190,
		135, 211,
		154, 211,
		160, 196,
		175, 192,
		183, 198,
		191, 209,
		179, 221,
		148, 227,
		109, 222,
		88, 207,
		84, 186,
		89, 172,
		104, 162,
		137, 154,
		152, 155,
		171, 153,
		198, 148,
		223, 155,
		260, 167,
		274, 179,
		273, 196,
		270, 219,
		276, 242,
		291, 256,
		330, 278,
		373, 282,
		377, 296,
		352, 313,
		323, 322,
		274, 351,
		243, 383,
		225, 424,
		227, 461,
		230, 483,
		241, 503,
		251, 522,
		243, 528,
		224, 511,
		212, 487,
		204, 459,
		197, 420,
		166, 382,
		169, 374,
		197, 375,
		221, 362,
		237, 343,
		250, 320,
		249, 290,
		212, 270,
		192, 280,
		149, 283,
		145, 265,
		128, 265,
		121, 280,
		79, 277,
		51, 256,
		37, 261,
		25, 277,
		15, 295,
		12, 327,
		15, 347,
		31, 362,
		60, 380,
		85, 389,
		102, 393,
		120, 397,
		131, 401,
		142, 403,
		144, 410,
		147, 426,
		138, 439,
		118, 449,
		108, 449,
		98, 439,
		86, 440,
		81, 454,
		70, 457,
		48, 468,
		31, 489,
		22, 571,
		23, 594,
		73, 621,
		73, 631,
		32, 655,
		34, 680,
		18, 705,
		16, 870,
		27, 928,
		60, 939,
		63, 953,
		81, 953,
		88, 939,
		117, 942,
		108, 960,
		39, 970,
		28, 981,
		39, 1140,
		73, 1157,
		125, 1169,
		158, 1203,
		173, 1244,
		168, 1276,
		137, 1306,
		133, 1338,
		152, 1358,
		151, 1431
	};

	int map2[24] = {
		446, 1431,
		360, 1431,
		333, 1396,
		327, 1377,
		323, 1340,
		310, 1344,
		297, 1355,
		270, 1365,
		226, 1365,
		188, 1365,
		155, 1360,
		148, 1432
	};


	int bottom1[72] = {
		506, 1315,
		517, 1325,
		541, 1343,
		555, 1347,
		576, 1344,
		596, 1335,
		606, 1320,
		617, 1306,
		632, 1297,
		656, 1294,
		680, 1292,
		701, 1288,
		696, 1282,
		677, 1286,
		652, 1288,
		620, 1287,
		599, 1284,
		577, 1273,
		566, 1253,
		564, 1229,
		568, 1196,
		571, 1169,
		589, 1150,
		608, 1131,
		628, 1104,
		636, 1094,
		642, 1069,
		643, 1034,
		631, 1038,
		621, 1053,
		608, 1072,
		549, 1161,
		549, 1274,
		546, 1288,
		537, 1298,
		519, 1309
	};

	int bottom_little[26] = {
		725, 1055,
		719, 1040,
		695, 1011,
		698, 1000,
		712, 1002,
		731, 1024,
		741, 1040,
		745, 1099,
		739, 1116,
		734, 1129,
		728, 1127,
		730, 1090,
		730, 1069
	};

	int right_corridor[20] = {
		451, 344,
		484, 355,
		507, 367,
		525, 383,
		532, 388,
		540, 384,
		519, 366,
		496, 352,
		475, 341,
		451, 336
	};

	int left_corridor[18] = {
		369, 346,
		335, 354,
		304, 376,
		284, 389,
		276, 386,
		284, 376,
		302, 365,
		324, 351,
		363, 338
	};


	int left_top[82] = {
		55, 564,
		60, 548,
		86, 533,
		118, 533,
		148, 544,
		163, 552,
		170, 581,
		151, 572,
		134, 582,
		143, 595,
		127, 610,
		115, 631,
		115, 665,
		118, 705,
		122, 733,
		122, 773,
		142, 773,
		148, 758,
		197, 755,
		197, 763,
		164, 770,
		152, 797,
		128, 802,
		123, 788,
		105, 775,
		93, 786,
		91, 818,
		102, 829,
		116, 835,
		142, 832,
		142, 844,
		122, 842,
		101, 835,
		83, 824,
		80, 798,
		87, 770,
		84, 694,
		72, 667,
		104, 649,
		101, 608,
		67, 587
	};


	int left_bot[50] = {
		149, 955,
		148, 1036,
		223, 1159,
		225, 1278,
		242, 1298,
		286, 1323,
		276, 1331,
		243, 1329,
		201, 1322,
		173, 1320,
		172, 1310,
		187, 1299,
		204, 1277,
		205, 1252,
		200, 1219,
		172, 1167,
		157, 1149,
		118, 1121,
		101, 1064,
		110, 1045,
		129, 1042,
		137, 1018,
		138, 966,
		140, 946,
		147, 945
	};


	
	int left_tunnel[40] = {
		55, 714,
		51, 804,
		66, 837,
		80, 853,
		94, 861,
		120, 865,
		141, 867,
		147, 909,
		137, 904,
		122, 877,
		103, 871,
		85, 875,
		71, 892,
		60, 909,
		49, 903,
		44, 857,
		42, 813,
		43, 783,
		45, 741,
		47, 721
	};

	int middle_top[58] = {
		681, 433,
		646, 415,
		642, 418,
		604, 404,
		602, 385,
		570, 349,
		557, 316,
		551, 265,
		554, 197,
		550, 183,
		542, 185,
		542, 224,
		529, 250,
		502, 269,
		483, 279,
		451, 278,
		447, 288,
		472, 307,
		515, 322,
		545, 345,
		574, 377,
		591, 418,
		595, 454,
		597, 483,
		604, 486,
		609, 464,
		622, 454,
		661, 456,
		678, 451
	};

	int middle_little[22] = {
		573, 513,
		589, 549,
		593, 602,
		573, 616,
		520, 615,
		492, 605,
		494, 585,
		519, 568,
		552, 550,
		567, 518,
		567, 516
	};

	int middle_little2[18] = {
		259, 564,
		284, 569,
		300, 587,
		316, 610,
		338, 603,
		337, 588,
		306, 569,
		288, 552,
		272, 551
	};

	

	int middle_mid[90] = {
		464, 696,
		480, 723,
		510, 745,
		510, 790,
		511, 843,
		515, 860,
		528, 863,
		538, 839,
		540, 803,
		543, 776,
		561, 757,
		586, 745,
		616, 745,
		645, 748,
		679, 751,
		689, 744,
		684, 733,
		691, 719,
		718, 713,
		733, 723,
		736, 750,
		714, 767,
		722, 783,
		730, 810,
		732, 832,
		725, 856,
		729, 876,
		736, 883,
		743, 880,
		745, 868,
		745, 814,
		745, 725,
		749, 650,
		726, 678,
		703, 696,
		677, 708,
		644, 720,
		540, 726,
		530, 716,
		531, 699,
		540, 683,
		503, 682,
		476, 683,
		447, 675,
		458, 690
	};

	int middle_mid2[34] = {
		388, 682,
		371, 692,
		311, 691,
		306, 702,
		312, 744,
		280, 776,
		244, 787,
		212, 798,
		193, 809,
		237, 814,
		271, 833,
		297, 843,
		322, 830,
		328, 794,
		338, 742,
		369, 723,
		389, 693
	};


	
	int middle_bot[66] = {
		574, 1043,
		610, 1020,
		612, 1013,
		584, 1000,
		547, 965,
		545, 892,
		523, 900,
		500, 893,
		489, 873,
		480, 844,
		482, 797,
		469, 798,
		472, 838,
		472, 900,
		473, 950,
		450, 1006,
		438, 1023,
		426, 1046,
		428, 1058,
		438, 1056,
		466, 1019,
		473, 1016,
		485, 1015,
		491, 1025,
		484, 1054,
		484, 1068,
		492, 1060,
		509, 1060,
		518, 1080,
		525, 1074,
		525, 1031,
		546, 1026,
		557, 1058
	};

	int middle_bot2[30] = {
		360, 847,
		360, 804,
		368, 801,
		370, 854,
		365, 952,
		368, 991,
		387, 1048,
		377, 1060,
		363, 1062,
		341, 1025,
		323, 969,
		309, 902,
		308, 888,
		341, 879,
		357, 859
	};


	int middle_bot3[48] = {
		276, 910,
		287, 940,
		301, 1011,
		310, 1064,
		327, 1098,
		321, 1107,
		308, 1081,
		289, 1086,
		283, 1111,
		250, 1103,
		247, 1067,
		267, 1063,
		289, 1048,
		293, 1020,
		277, 992,
		250, 990,
		224, 1003,
		218, 1023,
		206, 997,
		202, 967,
		221, 950,
		221, 938,
		240, 934,
		262, 920
	};

	int middle_bot4[16] = {
		171, 982,
		172, 1013,
		179, 1041,
		217, 1074,
		220, 1065,
		201, 1048,
		187, 1027,
		178, 978
	};


	int left_bouncer[10] = {
		300, 1308,
		255, 1283,
		254, 1211,
		261, 1211,
		303, 1295
	};
	
	int right_bouncer[10] = {
		482, 1309,
		523, 1284,
		528, 1212,
		518, 1213,
		480, 1293
	};

	int little_top_cave[26] = {

		634, 173,
		652, 176,
		675, 186,
		685, 200,
		672, 217,
		661, 234,
		652, 233,
		653, 222,
		638, 221,
		631, 231,
		621, 225,
		625, 209,
		625, 180
	};

	int snow_pile[32] = {

		364, 449,
		389, 455,
		413, 454,
		435, 454,
		461, 451,
		474, 443,
		456, 434,
		443, 417,
		431, 410,
		423, 397,
		405, 392,
		385, 404,
		378, 415,
		369, 419,
		367, 428,
		353, 443
	};

	int very_little[12] = {

		583, 189,
		583, 217,
		591, 225,
		601, 220,
		598, 190,
		591, 185
	};


	
	//kickers and springs

	int leftKicker[8] = {
		0, 7,
		0, -7,
		48, -2,
		48, 2
	};
	int leftKicker2[8] = {
		0, 7,
		0, -7,
		48, -2,
		48, 2
	};
	int leftKicker3[8] = {
		0, 7,
		0, -7,
		48, -2,
		48, 2
	};

	int rightKicker[8] = {
		0, 7,
		0, -7,
		-48, -2,
		-48, 2
	};

	int rightKicker2[8] = {
		0, 7,
		0, -7,
		-48, -2,
		-48, 2
	};
	int rightKicker3[8] = {
		0, 7,
		0, -7,
		-48, -2,
		-48, 2
	};

	PhysBody* kicker_l;
	PhysBody* kicker_l_2;
	PhysBody* kicker_l_3;

	PhysBody* kicker_r;
	PhysBody* kicker_r_2;
	PhysBody* kicker_r_3;
	
	//sensors
	PhysBody* sensor;
	PhysBody* teleporter;
	PhysBody* accelerator_spiral;
	PhysBody* accelerator_left;
	PhysBody* accelerator_right;


	PhysBody* accelerator_right_bot;
	PhysBody* accelerator_left_bot;

	PhysBody* bot_right_spring;
	PhysBody* bot_left_spring;
	PhysBody* mid_spring;

	PhysBody* game_over_sensor;


	bool sensed;
	bool ball_available;
	bool lose;
	//textures

	SDL_Texture* circle;
	//SDL_Texture* box;
	SDL_Texture* background;
	SDL_Texture* foreground;
	SDL_Texture* kickers;
	SDL_Texture* objects;
	uint bonus_fx;
	

	//joints
	b2RevoluteJoint* rJoint_left = nullptr;
	b2RevoluteJoint* rJoint_right = nullptr;
	b2RevoluteJoint* rJoint_left2 = nullptr;
	b2RevoluteJoint* rJoint_right2 = nullptr;
	b2RevoluteJoint* rJoint_right3 = nullptr;
	b2RevoluteJoint* rJoint_left3 = nullptr;

	
};
